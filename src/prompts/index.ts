/**
 * ìŠ¬ë˜ì‹œ ì»¤ë§¨ë“œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
 *
 * AI ì½”ë”© ë„êµ¬ìš© ëª…ë ¹ì–´ í”„ë¡¬í”„íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
 */

/**
 * í˜•ì‹ ê·œì¹™ ê°€ì´ë“œ (ê³µí†µ)
 */
export const FORMAT_GUIDE = `## í˜•ì‹ ê·œì¹™ (í•„ìˆ˜)

### RFC 2119 í‚¤ì›Œë“œ

| í‚¤ì›Œë“œ | ì˜ë¯¸ | ì‚¬ìš© ì˜ˆì‹œ |
|--------|------|-----------|
| **SHALL** / **MUST** | ì ˆëŒ€ í•„ìˆ˜ | "ì‹œìŠ¤í…œì€ ì¸ì¦ì„ ì§€ì›í•´ì•¼ í•œë‹¤(SHALL)" |
| **SHOULD** | ê¶Œì¥ (ì˜ˆì™¸ ê°€ëŠ¥) | "ì‘ë‹µ ì‹œê°„ì€ 1ì´ˆ ì´ë‚´ì—¬ì•¼ í•œë‹¤(SHOULD)" |
| **MAY** | ì„ íƒì  | "ë‹¤í¬ ëª¨ë“œë¥¼ ì§€ì›í•  ìˆ˜ ìˆë‹¤(MAY)" |
| **SHALL NOT** | ì ˆëŒ€ ê¸ˆì§€ | "í‰ë¬¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì €ì¥í•´ì„œëŠ” ì•ˆ ëœë‹¤(SHALL NOT)" |

### GIVEN-WHEN-THEN í˜•ì‹

ëª¨ë“  ìš”êµ¬ì‚¬í•­ì€ ì•„ë˜ í˜•ì‹ì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:

\`\`\`markdown
### Scenario: [ì‹œë‚˜ë¦¬ì˜¤ëª…]

- **GIVEN** [ì „ì œ ì¡°ê±´]
- **WHEN** [í–‰ë™/íŠ¸ë¦¬ê±°]
- **THEN** [ì˜ˆìƒ ê²°ê³¼]
\`\`\`
`;

/**
 * /sdd:change í”„ë¡¬í”„íŠ¸
 */
export const CHANGE_PROMPT = `# /sdd:change - ë³€ê²½ ì œì•ˆ

> ê¸°ì¡´ ìŠ¤í™ì— ëŒ€í•œ ë³€ê²½ì„ ì œì•ˆí•©ë‹ˆë‹¤.

${FORMAT_GUIDE}

---

## ìƒì„± ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ë³€ê²½ ëŒ€ìƒ ìŠ¤í™ í™•ì¸ë¨
- [ ] ë³€ê²½ ì‚¬ìœ ê°€ ëª…í™•í•¨
- [ ] ì˜í–¥ ë²”ìœ„ê°€ íŒŒì•…ë¨

---

## ìƒì„±í•  íŒŒì¼

### 1. proposal.md

\`\`\`markdown
---
id: CHG-{ID}
status: draft
created: {TODAY}
---

# ë³€ê²½ ì œì•ˆ: {TITLE}

> ë³€ê²½ ëª©ì  ë° ë°°ê²½ ì„¤ëª…

---

## ë°°ê²½

ì™œ ì´ ë³€ê²½ì´ í•„ìš”í•œê°€?

---

## ì˜í–¥ ë²”ìœ„

### ì˜í–¥ë°›ëŠ” ìŠ¤í™

- \`specs/{SPEC_PATH}\`

### ë³€ê²½ ìœ í˜•

- [ ] ì‹ ê·œ ì¶”ê°€ (ADDED)
- [ ] ìˆ˜ì • (MODIFIED)
- [ ] ì‚­ì œ (REMOVED)

---

## ë³€ê²½ ë‚´ìš©

(ADDED/MODIFIED/REMOVED ì„¹ì…˜ë³„ ìƒì„¸ ë‚´ìš©)

---

## ë¦¬ìŠ¤í¬ í‰ê°€

- ì˜í–¥ë„: ë‚®ìŒ/ì¤‘ê°„/ë†’ìŒ
- ë³µì¡ë„: ë‚®ìŒ/ì¤‘ê°„/ë†’ìŒ
\`\`\`

---

## ìƒì„± í›„ í™•ì¸

- [ ] \`sdd validate .sdd/changes/{ID}/proposal.md\` ì‹¤í–‰
- [ ] ë¸íƒ€ í˜•ì‹ í™•ì¸ (ADDED/MODIFIED/REMOVED)
- [ ] ì˜í–¥ë°›ëŠ” ìŠ¤í™ ëª©ë¡ í™•ì¸
`;

/**
 * /sdd:apply í”„ë¡¬í”„íŠ¸
 */
export const APPLY_PROMPT = `# /sdd:apply - ë³€ê²½ ì ìš©

> ìŠ¹ì¸ëœ ë³€ê²½ ì œì•ˆì„ ìŠ¤í™ì— ì ìš©í•©ë‹ˆë‹¤.

---

## ì ìš© ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] proposal.md ìƒíƒœê°€ approvedì¸ì§€ í™•ì¸
- [ ] delta.mdê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
- [ ] ì˜í–¥ë°›ëŠ” ëª¨ë“  ìŠ¤í™ íŒŒì¼ í™•ì¸

---

## ì ìš© í”„ë¡œì„¸ìŠ¤

1. delta.mdì—ì„œ ë³€ê²½ ë‚´ìš© ì¶”ì¶œ
2. ì˜í–¥ë°›ëŠ” ìŠ¤í™ íŒŒì¼ ìˆ˜ì •
   - ADDED: ìƒˆ ì„¹ì…˜ ì¶”ê°€
   - MODIFIED: ê¸°ì¡´ ì„¹ì…˜ ìˆ˜ì •
   - REMOVED: í•´ë‹¹ ì„¹ì…˜ ì‚­ì œ
3. ìŠ¤í™ íŒŒì¼ ê²€ì¦

---

## ì ìš© í›„ í™•ì¸

- [ ] \`sdd validate\` ì‹¤í–‰í•˜ì—¬ ëª¨ë“  ìŠ¤í™ ê²€ì¦
- [ ] ë³€ê²½ëœ ìŠ¤í™ íŒŒì¼ ëª©ë¡ í™•ì¸
- [ ] ë‹¤ìŒ ë‹¨ê³„: \`/sdd:archive\` ì‹¤í–‰
`;

/**
 * /sdd:archive í”„ë¡¬í”„íŠ¸
 */
export const ARCHIVE_PROMPT = `# /sdd:archive - ë³€ê²½ ì•„ì¹´ì´ë¸Œ

> ì™„ë£Œëœ ë³€ê²½ ì œì•ˆì„ ì•„ì¹´ì´ë¸Œí•©ë‹ˆë‹¤.

---

## ì•„ì¹´ì´ë¸Œ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ë³€ê²½ì´ ìŠ¤í™ì— ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ”ì§€ í™•ì¸
- [ ] ìŠ¤í™ ê²€ì¦ í†µê³¼ í™•ì¸

---

## ì•„ì¹´ì´ë¸Œ í”„ë¡œì„¸ìŠ¤

1. .sdd/changes/{ID}/ ë””ë ‰í† ë¦¬ë¥¼ .sdd/archive/ë¡œ ì´ë™
2. ì•„ì¹´ì´ë¸Œ ë‚ ì§œë¥¼ íŒŒì¼ëª…ì— ì¶”ê°€: {YYYY-MM-DD}-{ID}/
3. proposal.md ìƒíƒœë¥¼ archivedë¡œ ë³€ê²½

---

## ì•„ì¹´ì´ë¸Œ í›„ í™•ì¸

- [ ] .sdd/changes/{ID}/ ë””ë ‰í† ë¦¬ê°€ ì‚­ì œë¨
- [ ] .sdd/archive/{DATE}-{ID}/ ë””ë ‰í† ë¦¬ê°€ ìƒì„±ë¨
- [ ] ì•„ì¹´ì´ë¸Œëœ proposal.md ìƒíƒœ í™•ì¸
`;

/**
 * /sdd:impact í”„ë¡¬í”„íŠ¸
 */
export const IMPACT_PROMPT = `# /sdd:impact - ì˜í–¥ë„ ë¶„ì„

> ìŠ¤í™ ë³€ê²½ ì‹œ ê´€ë ¨ ìŠ¤í™ ë° ì½”ë“œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ë¶„ì„í•©ë‹ˆë‹¤.

---

## ë¶„ì„ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ë³€ê²½í•  ìŠ¤í™ ì‹ë³„ë¨
- [ ] ë³€ê²½ ë²”ìœ„ íŒŒì•…ë¨

---

## ë¶„ì„ í”„ë¡œì„¸ìŠ¤

1. ëŒ€ìƒ ìŠ¤í™ì˜ ì˜ì¡´ì„± ê·¸ë˜í”„ êµ¬ì¶•
2. ì´ ìŠ¤í™ì— ì˜ì¡´í•˜ëŠ” ë‹¤ë¥¸ ìŠ¤í™ ì‹ë³„
3. ì˜í–¥ë„ ìˆ˜ì¤€ í‰ê°€ (ë†’ìŒ/ì¤‘ê°„/ë‚®ìŒ)
4. ë¦¬ìŠ¤í¬ ì ìˆ˜ ì‚°ì¶œ (1-10)

---

## CLI ì‚¬ìš©ë²•

\`\`\`bash
# íŠ¹ì • ê¸°ëŠ¥ ì˜í–¥ë„ ë¶„ì„
sdd impact <feature-name>

# ì˜ì¡´ì„± ê·¸ë˜í”„ ì¶œë ¥ (Mermaid)
sdd impact --graph

# JSON í˜•ì‹ ì¶œë ¥
sdd impact <feature-name> --json
\`\`\`

---

## ì˜í–¥ ìˆ˜ì¤€ ê¸°ì¤€

| ìˆ˜ì¤€ | ê¸°ì¤€ | í‘œì‹œ |
|------|------|------|
| ë†’ìŒ | ì§ì ‘ ì˜ì¡´, API ë³€ê²½ | ğŸ”´ HIGH |
| ì¤‘ê°„ | ê°„ì ‘ ì˜ì¡´, ë°ì´í„° ê³µìœ  | ğŸŸ¡ MEDIUM |
| ë‚®ìŒ | UI ì»´í¬ë„ŒíŠ¸ ê³µìœ  | ğŸŸ¢ LOW |

---

## ë¦¬ìŠ¤í¬ ì ìˆ˜ í•´ì„

- 1-3: ë‚®ì€ ë¦¬ìŠ¤í¬ - ë°”ë¡œ ì§„í–‰ ê°€ëŠ¥
- 4-6: ì¤‘ê°„ ë¦¬ìŠ¤í¬ - ê²€í†  ê¶Œì¥
- 7-10: ë†’ì€ ë¦¬ìŠ¤í¬ - ì‹ ì¤‘í•œ ê²€í†  í•„ìš”

---

## ë¶„ì„ í›„ ì¡°ì¹˜

- ë†’ì€ ë¦¬ìŠ¤í¬: ê´€ë ¨ íŒ€ê³¼ ê³µìœ , ë‹¨ê³„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ê²€í† 
- ì¤‘ê°„ ë¦¬ìŠ¤í¬: ì˜í–¥ ìŠ¤í™ í…ŒìŠ¤íŠ¸ í™•ì¸
- ë‚®ì€ ë¦¬ìŠ¤í¬: í‘œì¤€ í”„ë¡œì„¸ìŠ¤ ì§„í–‰
`;

/**
 * /sdd:validate í”„ë¡¬í”„íŠ¸
 */
export const VALIDATE_PROMPT = `# /sdd:validate - ìŠ¤í™ ê²€ì¦

> ìŠ¤í™ íŒŒì¼ì˜ í˜•ì‹ê³¼ ë‚´ìš©ì„ ê²€ì¦í•©ë‹ˆë‹¤.

---

## ê²€ì¦ ëŒ€ìƒ

- .sdd/specs/ ë””ë ‰í† ë¦¬ì˜ ëª¨ë“  ìŠ¤í™ íŒŒì¼
- .sdd/changes/ ë””ë ‰í† ë¦¬ì˜ ëª¨ë“  ë³€ê²½ ì œì•ˆ

---

## ê²€ì¦ í•­ëª©

### í•„ìˆ˜ í˜•ì‹

1. YAML frontmatter ì¡´ì¬
   - status: draft | active | deprecated
   - created: YYYY-MM-DD
   - depends: null | [spec-id, ...]

2. RFC 2119 í‚¤ì›Œë“œ ì‚¬ìš©
   - SHALL, MUST, SHOULD, MAY, SHALL NOT

3. GIVEN-WHEN-THEN ì‹œë‚˜ë¦¬ì˜¤
   - ëª¨ë“  Requirementì— ìµœì†Œ 1ê°œ Scenario

---

## CLI ì‚¬ìš©ë²•

\`\`\`bash
# ì „ì²´ ê²€ì¦
sdd validate

# íŠ¹ì • ê²½ë¡œ ê²€ì¦
sdd validate .sdd/specs/feature/spec.md

# ì—„ê²© ëª¨ë“œ (ê²½ê³ ë„ ì—ëŸ¬ë¡œ ì²˜ë¦¬)
sdd validate --strict

# ì¡°ìš©í•œ ëª¨ë“œ
sdd validate --quiet
\`\`\`

---

## ê²€ì¦ ê²°ê³¼

- âœ… PASS: ëª¨ë“  ê²€ì¦ í†µê³¼
- âš ï¸ WARN: ê²½ê³  (--strictì—ì„œ ì‹¤íŒ¨)
- âŒ FAIL: í•„ìˆ˜ í•­ëª© ëˆ„ë½
`;

/**
 * ëª¨ë“  í”„ë¡¬í”„íŠ¸ ë§µ
 */
export const PROMPTS: Record<string, string> = {
  change: CHANGE_PROMPT,
  apply: APPLY_PROMPT,
  archive: ARCHIVE_PROMPT,
  impact: IMPACT_PROMPT,
  validate: VALIDATE_PROMPT,
};

/**
 * í”„ë¡¬í”„íŠ¸ ê°€ì ¸ì˜¤ê¸°
 */
export function getPrompt(command: string): string | undefined {
  return PROMPTS[command];
}

/**
 * ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´ ëª©ë¡
 */
export function getAvailableCommands(): string[] {
  return Object.keys(PROMPTS);
}
